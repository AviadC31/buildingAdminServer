(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{234:function(e,t,a){e.exports=a(482)},481:function(e,t,a){},482:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),l=a(96),o=a(43),u=a.n(o),s=a(81),d=a(28),m=a(84),f=a.n(m),p=(a(239),a(213)),b=a.n(p),h=(a(243),a(488));a(247);function v(e){var t=e.filterBy,a=r.a.createElement(f.a,{onClick:function(e){var a=e.key;t(a)}},r.a.createElement(f.a.Item,{key:"1"},"Debted"),r.a.createElement(f.a.Item,{key:"2"},"Undebted"),r.a.createElement(f.a.Divider,null),r.a.createElement(f.a.Item,{key:"3"},"Clear Filter"));return r.a.createElement("div",null,r.a.createElement(b.a,{className:"filter",overlay:a},r.a.createElement("a",{className:"ant-dropdown-link",href:"#0"},"Filter By ",r.a.createElement(h.a,null))))}function E(e){var t=e.data,a=e.filterData;return r.a.createElement(v,{filterBy:function(e){var n=parseInt(e);if(3===n)a(t);else if(2===n){var r=t.filter(function(e){return 0==e.financialDebt});a(r)}else if(1===n){var c=t.filter(function(e){return e.financialDebt>0});a(c)}}})}var O=a(48),j=a(115),g=a(160),y=a(485),S=a(486),k=a(33),w=a(484),x=a(487),I=[{title:"Name",dataIndex:"name",key:"name",editable:!0,sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"Phone Number",dataIndex:"phone",key:"phone",editable:!0},{title:"Address",dataIndex:"address",key:"address",editable:!0,sorter:function(e,t){return e.address.localeCompare(t.address)}},{title:"Financial Debt [$]",dataIndex:"financialDebt",key:"financialDebt",editable:!0,sorter:function(e,t){return e.financialDebt-t.financialDebt}},{title:"Operation",key:"operation",dataIndex:"operation"}],D=(a(185),a(42)),C=a.n(D),N=r.a.createContext(null),F=function(e){e.index;var t=Object(g.a)(e,["index"]),a=y.a.useForm(),n=Object(d.a)(a,1)[0];return r.a.createElement(y.a,{form:n,component:!1},r.a.createElement(N.Provider,{value:n},r.a.createElement("tr",t)))},_=function(e){var t=e.title,a=e.editable,c=e.children,i=e.dataIndex,l=e.record,o=e.handleSave,m=Object(g.a)(e,["title","editable","children","dataIndex","record","handleSave"]),f=Object(n.useState)(!1),p=Object(d.a)(f,2),b=p[0],h=p[1],v=Object(n.useRef)(null),E=Object(n.useContext)(N);Object(n.useEffect)(function(){b&&v.current.focus()},[b]);var k=function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h(!b),l._id&&b&&C.a.put("http://18.193.224.15/tenants-api/tenant/".concat(l._id),{field:i,value:t[i]}),E.setFieldsValue(Object(j.a)({},i,l[i]));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.validateFields();case 3:t=e.sent,k(t),o(Object(O.a)(Object(O.a)({},l),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Save failed:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),x=c;return a&&(x=b?r.a.createElement(y.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}]},r.a.createElement(S.a,{ref:v,onPressEnter:w,onBlur:w})):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:k},c)),r.a.createElement("td",m,x)};function P(e){var t=e.dataSource,a=e.liveData,c=Object(n.useState)([{}]),i=Object(d.a)(c,2),o=i[0],u=i[1];Object(n.useEffect)(function(){u(t)},[t]);var s=function(e){var t=Object(l.a)(o),n=t.findIndex(function(t){return e._id===t._id}),r=t[n];t.splice(n,1,Object(O.a)(Object(O.a)({},r),e)),!e._id&&e.name&&e.phone&&e.address&&e.financialDebt&&(delete e.operation,C.a.post("http://18.193.224.15/tenants-api/tenant",e).then(function(e){return t[n]._id=e.data._id}).catch(function(e){return alert("Input invalid")})),u(t),a(t)},m={body:{row:F,cell:_}},f=I.map(function(e){return e.editable?Object(O.a)(Object(O.a)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:s}}}):e});return r.a.createElement("div",{id:"tableSection"},r.a.createElement(k.a,{onClick:function(){return function(){alert("Please fill in the entire line in order to keep the information about the tenant");var e=o?Object(l.a)(o):[];e.unshift({name:"",phone:"",address:"",financialDebt:""}),u(e)}()},type:"primary"},"Add a row"),r.a.createElement(w.a,{components:m,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:o?o.map(function(e){return Object(O.a)(Object(O.a)({},e),{},{operation:r.a.createElement(x.a,{title:"Sure to delete?",onConfirm:function(){return t=e,C.a.delete("http://18.193.224.15/tenants-api/tenant/".concat(t.phone)),void u(o.filter(function(e){return e._id!==t._id}));var t}},r.a.createElement("a",{href:"#0"},"Delete"))})}):null,columns:f}))}var B=a(97),A=a(489),R=a(490);function T(e){var t=e.isLogged,a=e.remember,c=Object(n.useState)(!0),i=Object(d.a)(c,2),l=i[0],o=i[1],u=Object(n.useState)(!1),s=Object(d.a)(u,2),m=s[0],f=s[1];return r.a.createElement(y.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){l?C.a.post("http://18.193.224.15/users-api/sign-in",e).then(function(e){localStorage.setItem("token",e.data.accessToken),t(),f(!1)}).catch(function(e){return f(!0)}):C.a.post("http://18.193.224.15/users-api/register",e).then(function(e){o(!0),f(!1)}).catch(function(e){return f(!0)})}},r.a.createElement(y.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(S.a,{prefix:r.a.createElement(A.a,{className:"site-form-item-icon"}),placeholder:"Username"})),r.a.createElement(y.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(S.a,{prefix:r.a.createElement(R.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement("p",{className:m?"errOn":"errOff"},l?"Username doesn't exist":"Username in use"),l?r.a.createElement(y.a.Item,null,r.a.createElement(y.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},r.a.createElement(B.a,{onChange:function(e){return function(e){a(e.target.checked)}(e)}},"Remember me"))):null,r.a.createElement(y.a.Item,null,r.a.createElement(k.a,{type:"primary",htmlType:"submit",className:"login-form-button"},l?r.a.createElement(r.a.Fragment,null,"Sign in"):r.a.createElement(r.a.Fragment,null,"Register")),r.a.createElement("br",null),l?r.a.createElement("span",{onClick:function(){return f(!1)}},"Or ",r.a.createElement("a",{href:"#0",onClick:function(){return o(!1)}},"register now!")):null))}a(481);var U=S.a.Search;function q(){var e=Object(n.useState)([{}]),t=Object(d.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([{}]),o=Object(d.a)(i,2),m=o[0],f=o[1],p=Object(n.useState)(!0),b=Object(d.a)(p,2),h=b[0],v=b[1],O=Object(n.useState)(!0),j=Object(d.a)(O,2),g=j[0],y=j[1],S=Object(n.useState)(!1),w=Object(d.a)(S,2),x=w[0],I=w[1],D=Object(n.useState)(!1),N=Object(d.a)(D,2),F=N[0],_=N[1],B=Object(n.useState)(!1),A=Object(d.a)(B,2),R=A[0],q=A[1],L=r.a.createRef();Object(n.useEffect)(function(){J()},[]),window.addEventListener("beforeunload",function(){h||localStorage.clear()});var z=function(){var e=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:t=e.sent,C.a.post("http://18.193.224.15/users-api/sign-out",{},{headers:{Authorization:t}}),I(!1),console.log(h),h||localStorage.clear();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("token");case 2:(t=e.sent)&&C.a.get("http://18.193.224.15/tenants-api/tenants",{headers:{Authorization:t}}).then(function(e){I(!0),q(!1),c(e.data),f(e.data)}).catch(function(e){console.error(e)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"title"},"Building Tenants Adminisiter"),x?r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{type:"primary",htmlType:"submit",className:"login-form-button",onClick:function(){return z()},style:{position:"absolute",left:"2vw"}},"Sign Out"),r.a.createElement("div",null,r.a.createElement(U,{ref:L,id:g?"correctInp":"wrongInp",label:"Tester Name",placeholder:"Enter any tenant detail",onSearch:function(){var e=L.current.state.value;if(e&&e.length<40&&e.length>0)if(y(!0),"all"===e)f(Object(l.a)(a)),q(!1);else{var t=a.filter(function(t){return t.name.includes(e)||t.phone.includes(e)||t.address.includes(e)});t.length>0?(q(!1),f(t)):q(!0)}else y(!1)},onMouseEnter:function(){return _(!0)},onMouseLeave:function(){return _(!1)}}),r.a.createElement("p",{className:R?"errOn":"errOff"},"tenant doesn't exist")),r.a.createElement("span",{id:F?"hint":"hidden"},"Search 'all' for all tenants information"),r.a.createElement(E,{data:a,filterData:function(e){0===e.length&&e.push({}),f(e)}}),r.a.createElement(P,{dataSource:m[0]._id?m:null,liveData:c})):r.a.createElement(T,{isLogged:J,remember:v}))}var L=document.getElementById("root");i.a.render(r.a.createElement(q,null),L)}},[[234,1,2]]]);
//# sourceMappingURL=main.024a0ece.chunk.js.map